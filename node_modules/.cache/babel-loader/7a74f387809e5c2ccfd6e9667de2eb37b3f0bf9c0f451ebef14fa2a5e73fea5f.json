{"ast":null,"code":"import _regeneratorRuntime from\"/home/younes/Desktop/api/ai-content/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/younes/Desktop/api/ai-content/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/younes/Desktop/api/ai-content/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/home/younes/Desktop/api/ai-content/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useReducer}from'react';import{Container,Form,Button,Card,Row,Col}from'react-bootstrap';import{callAPI}from'../api/OpenAIAPI.js';import CopyToClipboard from'../common/CopyToClipboard.js';import LoadingSpinner from'../common/LoadingSpinner.js';import useTypingEffect from'../../hooks/useTypingEffect.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={heading:'AI Generated Response:',response:'',errorMessage:'',dataLoaded:false,isFormSubmitted:false};function reducer(state,action){switch(action.type){case'SET_HEADING':return _objectSpread(_objectSpread({},state),{},{heading:action.payload});case'SET_RESPONSE':return _objectSpread(_objectSpread({},state),{},{response:action.payload});case'SET_ERROR_MESSAGE':return _objectSpread(_objectSpread({},state),{},{errorMessage:action.payload});case'SET_DATA_LOADED':return _objectSpread(_objectSpread({},state),{},{dataLoaded:action.payload});case'SET_IS_FORM_SUBMITTED':return _objectSpread(_objectSpread({},state),{},{isFormSubmitted:action.payload});default:return state;}}var Generator=function Generator(_ref){var generatorData=_ref.generatorData;var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var typingSpeed=50;var responseWithTypingEffect=useTypingEffect(state.response,typingSpeed);var onFormSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var formData,prompt,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();formData=new FormData(e.target);prompt=\"\".concat(generatorData.prompt).concat(formData.get(generatorData.formName));dispatch({type:'SET_HEADING',payload:\"Thinking about your \".concat(generatorData.title,\" now...\")});dispatch({type:'SET_RESPONSE',payload:''});dispatch({type:'SET_ERROR_MESSAGE',payload:''});dispatch({type:'SET_IS_FORM_SUBMITTED',payload:true});dispatch({type:'SET_DATA_LOADED',payload:false});_context.prev=8;_context.next=11;return callAPI(prompt,{temperature:generatorData.temperature,max_tokens:generatorData.max_tokens,top_p:generatorData.top_p,frequency_penalty:generatorData.frequency_penalty,presence_penalty:generatorData.presence_penalty});case 11:data=_context.sent;if(data.error){dispatch({type:'SET_ERROR_MESSAGE',payload:data.message});}else{dispatch({type:'SET_HEADING',payload:\"Your AI Generated \".concat(generatorData.title,\":\")});dispatch({type:'SET_RESPONSE',payload:data});}_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](8);console.error(\"Error:\",_context.t0);case 18:_context.prev=18;dispatch({type:'SET_DATA_LOADED',payload:true});return _context.finish(18);case 21:case\"end\":return _context.stop();}},_callee,null,[[8,15,18,21]]);}));return function onFormSubmit(_x){return _ref2.apply(this,arguments);};}();var title=generatorData.title,description2=generatorData.description2,formLabel=generatorData.formLabel,formName=generatorData.formName,placeholder=generatorData.placeholder;return/*#__PURE__*/_jsx(\"div\",{id:\"main\",children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:6,md:4,children:[/*#__PURE__*/_jsx(\"h1\",{children:title}),/*#__PURE__*/_jsx(\"p\",{id:\"pageDescription\",children:description2}),/*#__PURE__*/_jsxs(Form,{onSubmit:onFormSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"textArea\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:formLabel}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",name:formName,placeholder:placeholder})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"md\",type:\"submit\",children:\"Submit\"})]})]}),/*#__PURE__*/_jsx(Col,{xs:12,md:8,children:/*#__PURE__*/_jsxs(Card,{className:\"text-center\",children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(\"h2\",{children:state.heading})}),/*#__PURE__*/_jsx(Card.Body,{children:state.errorMessage?/*#__PURE__*/_jsx(\"p\",{variant:\"danger\",className:\"mt-3\",children:state.errorMessage}):state.dataLoaded&&state.response?/*#__PURE__*/_jsxs(\"div\",{className:\"response-container\",children:[/*#__PURE__*/_jsx(Card.Text,{as:\"div\",className:\"pre-wrap\",children:responseWithTypingEffect}),state.response&&/*#__PURE__*/_jsx(CopyToClipboard,{text:state.response})]}):!state.isFormSubmitted?/*#__PURE__*/_jsxs(Card.Text,{children:[\"The Response from the AI for your \",title,\" will show here.\"]}):/*#__PURE__*/_jsx(LoadingSpinner,{})})]})})]})})});};export default Generator;","map":{"version":3,"names":["React","useReducer","Container","Form","Button","Card","Row","Col","callAPI","CopyToClipboard","LoadingSpinner","useTypingEffect","jsx","_jsx","jsxs","_jsxs","initialState","heading","response","errorMessage","dataLoaded","isFormSubmitted","reducer","state","action","type","_objectSpread","payload","Generator","_ref","generatorData","_useReducer","_useReducer2","_slicedToArray","dispatch","typingSpeed","responseWithTypingEffect","onFormSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","formData","prompt","data","wrap","_callee$","_context","prev","next","preventDefault","FormData","target","concat","get","formName","title","temperature","max_tokens","top_p","frequency_penalty","presence_penalty","sent","error","message","t0","console","finish","stop","_x","apply","arguments","description2","formLabel","placeholder","id","children","xs","md","onSubmit","Group","controlId","className","Label","Control","as","name","variant","size","Header","Body","Text","text"],"sources":["/home/younes/Desktop/api/ai-content/src/components/generators/Generator.js"],"sourcesContent":["import React, { useReducer } from 'react'\nimport { Container, Form, Button, Card, Row, Col } from 'react-bootstrap'\nimport { callAPI } from '../api/OpenAIAPI.js';\n\nimport CopyToClipboard from '../common/CopyToClipboard.js';\nimport LoadingSpinner from '../common/LoadingSpinner.js';\nimport useTypingEffect from '../../hooks/useTypingEffect.js';\n\n\nconst initialState = {\n  heading: 'AI Generated Response:',\n  response: '',\n  errorMessage: '',\n  dataLoaded: false,\n  isFormSubmitted: false,\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'SET_HEADING':\n      return { ...state, heading: action.payload };\n    case 'SET_RESPONSE':\n      return { ...state, response: action.payload };\n    case 'SET_ERROR_MESSAGE':\n      return { ...state, errorMessage: action.payload };\n    case 'SET_DATA_LOADED':\n      return { ...state, dataLoaded: action.payload };\n    case 'SET_IS_FORM_SUBMITTED':\n      return { ...state, isFormSubmitted: action.payload };\n    default:\n      return state;\n  }\n}\n\nconst Generator = ({ generatorData }) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  const typingSpeed = 50;\n  const responseWithTypingEffect = useTypingEffect(state.response, typingSpeed);\n\n  const onFormSubmit = async (e) => {\n    e.preventDefault();\n\n    const formData = new FormData(e.target);\n    const prompt = `${generatorData.prompt}${formData.get(generatorData.formName)}`;\n\n    dispatch({ type: 'SET_HEADING', payload: `Thinking about your ${generatorData.title} now...` });\n    dispatch({ type: 'SET_RESPONSE', payload: '' });\n    dispatch({ type: 'SET_ERROR_MESSAGE', payload: '' });\n    dispatch({ type: 'SET_IS_FORM_SUBMITTED', payload: true });\n    dispatch({ type: 'SET_DATA_LOADED', payload: false });\n\n    try {\n      const data = await callAPI(prompt, {\n        temperature: generatorData.temperature,\n        max_tokens: generatorData.max_tokens,\n        top_p: generatorData.top_p,\n        frequency_penalty: generatorData.frequency_penalty,\n        presence_penalty: generatorData.presence_penalty,\n      });\n\n      if (data.error) {\n        dispatch({ type: 'SET_ERROR_MESSAGE', payload: data.message });\n      } else {\n        dispatch({ type: 'SET_HEADING', payload: `Your AI Generated ${generatorData.title}:` });\n        dispatch({ type: 'SET_RESPONSE', payload: data });\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n    } finally {\n      dispatch({ type: 'SET_DATA_LOADED', payload: true });\n    }\n  };\n\n\n  const { title, description2, formLabel, formName, placeholder } = generatorData;\n\n  return (\n    <div id=\"main\">\n      <Container>\n        <Row>\n          <Col xs={6} md={4}>\n            <h1>{title}</h1>\n            <p id=\"pageDescription\">{description2}</p>\n            <Form onSubmit={onFormSubmit}>\n              <Form.Group controlId=\"textArea\" className=\"mb-3\">\n                <Form.Label>{formLabel}</Form.Label>\n                <Form.Control as=\"textarea\" name={formName} placeholder={placeholder} />\n              </Form.Group>\n              <Button variant=\"primary\" size=\"md\" type=\"submit\">\n                Submit\n              </Button>\n            </Form>\n          </Col>\n\n          <Col xs={12} md={8}>\n            <Card className=\"text-center\">\n              <Card.Header>\n                <h2>{state.heading}</h2>\n              </Card.Header>\n              <Card.Body>\n                {\n                  state.errorMessage ?\n                    (\n                      <p variant=\"danger\" className=\"mt-3\">{state.errorMessage}</p>\n                    )\n                    : state.dataLoaded && state.response ?\n                      (\n                        <div className=\"response-container\">\n                          <Card.Text as=\"div\" className=\"pre-wrap\">\n                            {responseWithTypingEffect}\n                          </Card.Text>\n                          {state.response && <CopyToClipboard text={state.response} />}\n                        </div>\n                      )\n                      : !state.isFormSubmitted ?\n                        (\n                          <Card.Text>\n                            The Response from the AI for your {title} will show here.\n                          </Card.Text>\n                        )\n                        :\n                        (\n                          <LoadingSpinner />\n                        )}\n              </Card.Body>\n            </Card>\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  );\n};\n\nexport default Generator;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}